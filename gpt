children: List.generate(game.garden.length, (i) {
  if (i >= game.unlockedSlots) {
    int cost = game.nextGardenSlotCost();

    return SizedBox(
      width: 100,
      height: 100,
      child: ElevatedButton(
        onPressed: game.gold >= cost
            ? game.unlockGardenSlot
            : null,
        child: Text(
          cost < 0
              ? "MAX"
              : "Unlock\n${cost}g",
          textAlign: TextAlign.center,
        ),
      ),
    );
  }

  final slot = game.garden[i];

  if (slot == null) {
    return SizedBox(
      width: 100,
      height: 100,
      child: ElevatedButton(
        onPressed: () {
          showDialog(
            context: context,
            builder: (_) => plantDialog(context, i),
          );
        },
        child: const Text("Plant"),
      ),
    );
  } else {
    int id = slot["plant"];
    int start = slot["start"];
    final p = plants[id];

    final elapsed = DateTime.now().difference(
        DateTime.fromMillisecondsSinceEpoch(start));

    double progress =
        elapsed.inMilliseconds /
            p.growTime.inMilliseconds;

    if (progress >= 1) {
      return SizedBox(
        width: 100,
        height: 100,
        child: ElevatedButton(
          onPressed: () => game.harvest(i),
          child: Text("Harvest\n${p.name}",
              textAlign: TextAlign.center),
        ),
      );
    }

    return SizedBox(
      width: 100,
      height: 100,
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Text(p.name, textAlign: TextAlign.center),
          const SizedBox(height: 6),
          LinearProgressIndicator(value: progress),
        ],
      ),
    );
  }
}),






























List<Map<String, dynamic>?> garden =
List.generate(5, (_) => null);

//to

static const int maxGardenSlots = 10;

List<Map<String, dynamic>?> garden =
List.generate(maxGardenSlots, (_) => null);



int unlockedSlots = 1;

//to

int unlockedSlots = 3;


int nextGardenSlotCost() {
  if (unlockedSlots >= maxGardenSlots) return -1;

  // exponenciális ár
  return 50 * unlockedSlots;
}


//to


void unlockGardenSlot() {
  int cost = nextGardenSlotCost();
  if (cost < 0) return;
  if (gold < cost) return;

  gold -= cost;
  unlockedSlots++;

  save();
  notifyListeners();
}


//load and saveben is!
for (int i = 0; i < 5; i++) {

//to

for (int i = 0; i < maxGardenSlots; i++) {


children: List.generate(5, (i) {




children: List.generate(game.garden.length, (i) {})




children: List.generate(game.garden.length, (i) {
    if (i >= game.unlockedSlots) {
        int cost = game.nextGardenSlotCost();

            return SizedBox(
                  width: 100,
                        height: 100,
                              child: ElevatedButton(
                                      onPressed: game.gold >= cost
                                                  ? game.unlockGardenSlot
                                                              : null,
                                                                      child: Text(
                                                                                cost < 0
                                                                                              ? "MAX"
                                                                                                            : "Unlock\n${cost}g",
                                                                                                                      textAlign: TextAlign.center,
                                                                                                                              ),
                                                                                                                                    ),
                                                                                                                                        );
                                                                                                                                          }

                                                                                                                                            final slot = game.garden[i];

                                                                                                                                              if (slot == null) {
                                                                                                                                                  return SizedBox(
                                                                                                                                                        width: 100,
                                                                                                                                                              height: 100,
                                                                                                                                                                    child: ElevatedButton(
                                                                                                                                                                            onPressed: () {
                                                                                                                                                                                      showDialog(
                                                                                                                                                                                                  context: context,
                                                                                                                                                                                                              builder: (_) => plantDialog(context, i),
                                                                                                                                                                                                                        );
                                                                                                                                                                                                                                },
                                                                                                                                                                                                                                        child: const Text("Plant"),
                                                                                                                                                                                                                                              ),
                                                                                                                                                                                                                                                  );
                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                        int id = slot["plant"];
                                                                                                                                                                                                                                                            int start = slot["start"];
                                                                                                                                                                                                                                                                final p = plants[id];

                                                                                                                                                                                                                                                                    final elapsed = DateTime.now().difference(
                                                                                                                                                                                                                                                                            DateTime.fromMillisecondsSinceEpoch(start));

                                                                                                                                                                                                                                                                                double progress =
                                                                                                                                                                                                                                                                                        elapsed.inMilliseconds /
                                                                                                                                                                                                                                                                                                    p.growTime.inMilliseconds;

                                                                                                                                                                                                                                                                                                        if (progress >= 1) {
                                                                                                                                                                                                                                                                                                              return SizedBox(
                                                                                                                                                                                                                                                                                                                      width: 100,
                                                                                                                                                                                                                                                                                                                              height: 100,
                                                                                                                                                                                                                                                                                                                                      child: ElevatedButton(
                                                                                                                                                                                                                                                                                                                                                onPressed: () => game.harvest(i),
                                                                                                                                                                                                                                                                                                                                                          child: Text("Harvest\n${p.name}",
                                                                                                                                                                                                                                                                                                                                                                        textAlign: TextAlign.center),
                                                                                                                                                                                                                                                                                                                                                                                ),
                                                                                                                                                                                                                                                                                                                                                                                      );
                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                              return SizedBox(
                                                                                                                                                                                                                                                                                                                                                                                                    width: 100,
                                                                                                                                                                                                                                                                                                                                                                                                          height: 100,
                                                                                                                                                                                                                                                                                                                                                                                                                child: Column(
                                                                                                                                                                                                                                                                                                                                                                                                                        mainAxisAlignment: MainAxisAlignment.center,
                                                                                                                                                                                                                                                                                                                                                                                                                                children: [
                                                                                                                                                                                                                                                                                                                                                                                                                                          Text(p.name, textAlign: TextAlign.center),
                                                                                                                                                                                                                                                                                                                                                                                                                                                    const SizedBox(height: 6),
                                                                                                                                                                                                                                                                                                                                                                                                                                                              LinearProgressIndicator(value: progress),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                );
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }),
})


return Wrap(
    spacing: 10,
      runSpacing: 10,
        children: ...
        );
)
